<ion-view view-title="{{ 'TOPIC' | translate}}">
    <ion-nav-buttons side="right">
        <a class="button button-clear button-light icon ion-plus-round" ui-sref="hey-topic-create">
        </a>
    </ion-nav-buttons>

    <ion-content id="module-topic" delegate-handle="contentScrollDelegate">
        <ion-refresher
            pulling-text="{{ 'PULL_TO_REFRESH' | translate }}"
            on-refresh="doRefresh()">
        </ion-refresher>

        <div ng-hide="topics" class="padding text-center">
            <ion-spinner></ion-spinner>
        </div>

        <div class="list">
            <a ng-repeat="item in topics" class="item item-activity item-thumbnail-left item-text-wrap" href="#/topic-detail/{{ item.id }}">
                <img class="avatar" style="background-color:#dfdfdf;" ng-src="{{ getPicUrl(item.author.avatar + '?imageView/2/w/200') }}">
                <h2 class="title ng-binding">{{ item.title }}</h2>
                <p class="content" ng-bind-html="item.content | nl2br">
                </p>
            </a>
        </div>

        <ion-infinite-scroll
            on-infinite="loadMore()"
            ng-if="!loadMoreDisabled"
            immediate-check="false"
            distance="1%">
        </ion-infinite-scroll>
    </ion-content>
</ion-view>
